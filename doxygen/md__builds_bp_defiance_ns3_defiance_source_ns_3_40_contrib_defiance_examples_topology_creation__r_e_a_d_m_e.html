<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>defiance: Topology Creator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">defiance
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">The defiance module for the ns-3 simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__builds_bp_defiance_ns3_defiance_source_ns_3_40_contrib_defiance_examples_topology_creation__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Topology Creator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This topology-creator is a standalone program using the installed sumo and the prebuilt files to generate one NodeContainers.\ The NodeContainer contains all base stations in the area followed by a number of User Equipment with defined traces to follow.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Installation (skip if in a Devcontainer)</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
Linux</h2>
<p>To install SUMO first, do the following under Linux.</p>
<div class="fragment"><div class="line">sudo add-apt-repository ppa:sumo/stable</div>
<div class="line">sudo apt-get update</div>
<div class="line">sudo apt-get install sumo sumo-tools sumo-doc</div>
</div><!-- fragment --><p>If the <code>add-apt-repository</code> command is not found, install it by running:</p>
<div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install software-properties-common</div>
</div><!-- fragment --><p>Now open <code>~/.bashrc</code> and add the following line at the bottom. You can also run this in a terminal to add the variable temporarily. It will only be accessible for the current terminal session.</p>
<div class="fragment"><div class="line">export SUMO_HOME=&quot;/usr/share/sumo&quot;</div>
</div><!-- fragment --><p>Make sure, sumo is actually installed in this folder (it should be). Otherwise set <code>SUMO_HOME</code> accordingly.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Libsumo</h2>
<p>To interact with a simulation, Traci is <em>way</em> too slow (&gt;20min on 3600 steps), so we want to use libsumo. Libsumo has the same interface as traci.</p>
<h3><a class="anchor" id="autotoc_md13"></a>
x86_64</h3>
<p>To install libsumo on x86_64 architecture, you can simply use <code>pip install libsumo</code>, but for arm64, you need to build it from source.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
arm64 (M1, M2, ...)</h3>
<p>Steps 1-6 follow the official instructions from the <a href="https://sumo.dlr.de/docs/Installing/MacOS_Build.html">macOS build website</a></p>
<ol type="1">
<li>Install dependencies for compiling sumo:</li>
</ol>
<div class="fragment"><div class="line">brew update</div>
<div class="line">xcode-select --install</div>
<div class="line">brew install cmake</div>
</div><!-- fragment --><ol type="1">
<li>Install dependencies for running sumo:</li>
</ol>
<div class="fragment"><div class="line">brew install --cask xquartz</div>
<div class="line">brew install xerces-c fox proj gdal gl2ps</div>
</div><!-- fragment --><ol type="1">
<li>For libsumo, you need to install the following dependencies:</li>
</ol>
<div class="fragment"><div class="line">brew install python swig eigen pygobject3 gtk+3 adwaita-icon-theme</div>
</div><!-- fragment --><ol type="1">
<li>Clone the sumo repository into a folder of your choice:</li>
</ol>
<div class="fragment"><div class="line">git clone --recursive https://github.com/eclipse-sumo/sumo</div>
</div><!-- fragment --><p>and insert the following line into your <code>.bashrc</code> or <code>.zshrc</code> file:</p>
<div class="fragment"><div class="line">export SUMO_HOME=&quot;$PWD/sumo&quot;</div>
</div><!-- fragment --><p>Reload your shell or run <code>source ~/.bashrc</code> or <code>source ~/.zshrc</code>.</p>
<ol type="1">
<li>Invoke CMake to trigger the configuration process and build sumo:</li>
</ol>
<div class="fragment"><div class="line">cd $SUMO_HOME</div>
<div class="line">cmake -B build .</div>
<div class="line">cd $SUMO_HOME</div>
<div class="line">cmake --build build --parallel $(sysctl -n hw.ncpu)</div>
</div><!-- fragment --><ol type="1">
<li>To install libsumo, create a build directory:</li>
</ol>
<div class="fragment"><div class="line">cd $SUMO_HOME</div>
<div class="line">mkdir -p out/build-python</div>
<div class="line">cd out/build-python</div>
</div><!-- fragment --><p>And if you have python installed with brew, try to build libsumo with the following command (make sure to replace the python path with your python path):</p>
<div class="fragment"><div class="line">cmake -DPYTHON_EXECUTABLE=/usr/local/bin/python3.12 ../..</div>
</div><!-- fragment --><ol type="1">
<li>Insert the following line into your <code>.bashrc</code> or <code>.zshrc</code> file to make sure that python can find the libsumo module:</li>
</ol>
<div class="fragment"><div class="line">export PYTHONPATH=&quot;$SUMO_HOME/tools:$PYTHONPATH&quot;</div>
</div><!-- fragment --><ol type="1">
<li>(Optional) If step 6 doesn't work when loading libsumo at step 9 (python not configured correctly or it doesn't detect your headers dir or ...), try to build libsumo with the following command with the correct paths (make sure to replace the python header and library paths with your python header and library paths):</li>
</ol>
<div class="fragment"><div class="line">cmake -DPYTHON_EXECUTABLE=/opt/homebrew/Frameworks/Python.framework/Versions/3.12/bin/python3.12 -DPYTHON_LIBRARY:FILEPATH=/opt/homebrew/opt/python@3.12/Frameworks/Python.framework/Versions/3.12/lib/libpython3.12.dylib -DPYTHON_INCLUDE_DIR:PATH=/opt/homebrew/opt/python@3.12/Frameworks/Python.framework/Versions/3.12/Headers ../..</div>
</div><!-- fragment --><p>and insert the following line into your <code>.bashrc</code> or <code>.zshrc</code> same as mentioned above:</p>
<div class="fragment"><div class="line">export PYTHONPATH=&quot;$SUMO_HOME/tools:$PYTHONPATH&quot;</div>
</div><!-- fragment --><p><b>Hint:</b> To make sure libsumo is built, you can check whether the folder <code>$SUMO_HOME/tools/libsumo</code> exists and contains the file <code>_libsumo.so</code>.</p>
<ol type="1">
<li>After the build, you should be able to load libsumo (if not working, ensure you have done step 7 and 6 or 8 correctly):</li>
</ol>
<div class="fragment"><div class="line">python</div>
<div class="line">&gt;&gt;&gt; import libsumo</div>
<div class="line">&gt;&gt;&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md15"></a>
Usage</h1>
<ol type="1">
<li>Configure and build CMake.</li>
<li>CMake: Set Build Target to defiance-sumo-topology-creator (if you don't want to run all tests).</li>
<li>CMake: Run without Debbuging \ This executes <a href="./sumo-topology-creator.cc"><code>sumo-topology-creator.cc</code></a>.</li>
</ol>
<h1><a class="anchor" id="autotoc_md16"></a>
Results</h1>
<p>This example creates the mentioned NodeContainer. If using the <code>--output</code> parameter, the resulting NodeContainer is additionally written into the <code>/build/contrib/defiance/examples</code> folder, you should the corresponding file <code>nodes.json</code> there. This file contains the NodeContainer in a json format.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Common Errors</h1>
<ul>
<li>getcwd() fails<ul>
<li>can't fetch current working directory</li>
<li>Solution: Close your current terminal and use a new one. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Aug 16 2024 07:37:06 for defiance by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
